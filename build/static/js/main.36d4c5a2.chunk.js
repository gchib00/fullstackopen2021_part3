(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(14),o=n.n(c),s=n(3),i=n(0),u=function(e){var t=e.content,n={width:"500px",height:"30px",backgroundColor:"green",display:"flex",justifyContent:"center",alignItems:"center"};return"Unable to update, contact no longer exists"===t&&(n={width:"500px",height:"30px",backgroundColor:"red",display:"flex",justifyContent:"center",alignItems:"center"}),Object(i.jsx)("div",{style:n,children:Object(i.jsx)("p",{style:{color:"white",fontSize:"1.2rem"},children:t})})},a=n(4),l=n.n(a),d="/api/persons/",j=function(){return l.a.get(d).then((function(e){return e.data}))},b={addPerson:function(e){return l.a.post(d,e).then(j)},getAll:j,removePerson:function(e){return l.a.delete(d+e).then(j)},updateNumber:function(e){return l.a.put(d+e.id,{name:e.name,number:e.number}).then(j).catch((function(e){console.log("It got stuck at contacts.js!"),console.log("IT FAILED AT AXIOS: ",e)}))}},f=function(e){var t=e.persons,n=e.setPersons,c=e.existingNames,o=Object(r.useState)(""),a=Object(s.a)(o,2),l=a[0],d=a[1],j=Object(r.useState)(""),f=Object(s.a)(j,2),h=f[0],O=f[1],m=Object(r.useState)(!1),x=Object(s.a)(m,2),p=x[0],g=x[1],v=Object(r.useState)(!1),y=Object(s.a)(v,2),w=y[0],C=y[1],k=Object(r.useState)(""),A=Object(s.a)(k,2),S=A[0],N=A[1];return Object(i.jsxs)("div",{children:[Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault()},children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:l,onChange:function(e){d(e.target.value)}})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:h,onChange:function(e){O(e.target.value)}})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",onClick:function(){if(c.includes(l.toLowerCase())){if(t.some((function(e){return e.number===h})))alert("'".concat(l,"' is already added to the phonebook!"));else if(window.confirm("".concat(l," is already added to the phonebook. Would you like to replace the old phone number with the new one?"))){var e=t.find((function(e){return e.name===l}));e.number=h,b.updateNumber(e).then((function(e){t.length>e.length&&N(!0),n(e)})).catch((function(e){return e})),console.log(S),!1===S?(C(!0),setTimeout((function(){C(!1)}),4e3)):setTimeout((function(){N(!1)}),5e3)}}else{var r={name:l,number:h};b.addPerson(r).then((function(e){n(e)})),g(!0),setTimeout((function(){g(!1)}),4e3)}},children:"add"})})]}),Object(i.jsxs)("div",{children:[!0===p?Object(i.jsx)(u,{content:"".concat(l," has been added")}):null,!0===w?Object(i.jsx)(u,{content:"Number has been changed to ".concat(h)}):null,!0===S?Object(i.jsx)(u,{content:"Unable to update, contact no longer exists"}):null]})]})},h=function(e){var t=e.persons,n=e.existingNames,c=e.setFilteredArray,o=Object(r.useState)(""),u=Object(s.a)(o,2),a=u[0],l=u[1],d=n.filter((function(e){return e.includes(a.toLowerCase())})),j=t.filter((function(e){return d.includes(e.name.toLowerCase())}));return Object(r.useEffect)((function(){c(j),""===a&&c([])}),[a,c]),Object(i.jsxs)("div",{children:["Filter contact list: ",Object(i.jsx)("input",{value:a,onChange:function(e){l(e.target.value)}})]})},O=function(e){var t=e.filteredArray,n=e.persons,r=e.setPersons,c=e.setFilteredArray,o=function(e){var o=e.id,s=e.name;window.confirm("Delete ".concat(s,"?"))&&(b.removePerson(o),r(n.filter((function(e){return e.id!==o}))),t.map((function(e){return e.id===o}))&&c(t.filter((function(e){return e.id!==o}))))};return Object(i.jsx)("ul",{children:t.length>0?t.map((function(e){return Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start"},children:[Object(i.jsxs)("li",{children:[e.name," - ",e.number]}),Object(i.jsx)("button",{onClick:function(){return o(e)},children:"delete"})]},e.name)})):n.map((function(e){return Object(i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start"},children:[Object(i.jsxs)("li",{children:[e.name," - ",e.number]}),Object(i.jsx)("button",{onClick:function(){return o(e)},children:"delete"})]},e.name)}))})},m=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),u=Object(s.a)(o,2),a=u[0],l=u[1],d=n.map((function(e){return e.name.toLowerCase()}));return Object(r.useEffect)((function(){b.getAll().then((function(e){c(e)}))}),[]),Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(h,{persons:n,existingNames:d,setFilteredArray:l}),Object(i.jsx)("h2",{children:"Add New"}),Object(i.jsx)(f,{persons:n,setPersons:c,existingNames:d}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(O,{persons:n,setPersons:c,filteredArray:a,setFilteredArray:l})]})};o.a.render(Object(i.jsx)(m,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.36d4c5a2.chunk.js.map